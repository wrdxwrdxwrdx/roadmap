# CI/CD Workflows

## GitHub Actions Workflow

Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏:
- Push –≤ –≤–µ—Ç–∫–∏ `main` –∏–ª–∏ `develop`
- Pull Request –≤ –≤–µ—Ç–∫–∏ `main` –∏–ª–∏ `develop`

## –ó–∞—â–∏—Ç–∞ –æ—Ç –≤–ª–∏—Ç–∏—è –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö PR

–î–ª—è –∑–∞–ø—Ä–µ—Ç–∞ –≤–ª–∏—Ç–∏—è PR –ø—Ä–∏ –Ω–µ—É—Å–ø–µ—à–Ω–æ–º workflow –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å **Branch Protection Rules** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** —Å–º. [BRANCH_PROTECTION.md](./BRANCH_PROTECTION.md)

### –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:

1. Settings ‚Üí Branches ‚Üí Add rule
2. –î–ª—è –≤–µ—Ç–æ–∫ `main` –∏ `develop` –≤–∫–ª—é—á–∏—Ç–µ:
   - ‚úÖ Require a pull request before merging
   - ‚úÖ Require status checks to pass before merging
   - ‚úÖ –î–æ–±–∞–≤—å—Ç–µ —Å—Ç–∞—Ç—É—Å—ã: `Lint`, `Test`, `Build`
   - ‚úÖ Do not allow bypassing the above settings

### Jobs

1. **lint** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–∞–º–∏
   - golangci-lint
   - go vet
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (gofmt)

2. **test** - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
   - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ (–º–∏–Ω–∏–º—É–º 70%)
   - –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –≤ Codecov

3. **build** - –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ö–æ–º–ø–∏–ª—è—Ü–∏—è Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

4. **frontend-lint** - –õ–∏–Ω—Ç–∏–Ω–≥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript/JavaScript –∫–æ–¥–∞

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–≥–æ workflow –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
make workflow
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç –≤—Å–µ —à–∞–≥–∏ CI –ª–æ–∫–∞–ª—å–Ω–æ:
1. –õ–∏–Ω—Ç–∏–Ω–≥
2. –¢–µ—Å—Ç—ã
3. –°–±–æ—Ä–∫–∞
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

### –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `make lint` - –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –ª–∏–Ω—Ç–µ—Ä—ã
- `make lint-fix` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ª–∏–Ω—Ç–∏–Ω–≥–∞
- `make format` - –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
- `make test-short` - –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –∫—Ä–∞—Ç–∫–∏–º –≤—ã–≤–æ–¥–æ–º
- `make test` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–î–ª—è –ø–æ–ª–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ª–∏–Ω—Ç–µ—Ä–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

```bash
# golangci-lint
go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest

# goimports (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤)
go install golang.org/x/tools/cmd/goimports@latest
```

