# Roadmap Frontend

Frontend приложение, построенное на React + TypeScript + Vite с настроенным роутингом, HTTP клиентом и управлением состоянием.

## Быстрый старт

### Через Docker (рекомендуется)

```bash
# Из корня проекта
# Production режим
make up

# Development режим (с hot reload)
make up-dev
```

Приложение будет доступно по адресу `http://localhost:3000`

### Локально (без Docker)

```bash
# Установка зависимостей
cd frontend
npm install

# Запуск dev-сервера
npm run dev
```

Приложение будет доступно по адресу `http://localhost:3000`

> Подробнее о Docker setup см. [FRONTEND_DOCKER.md](../FRONTEND_DOCKER.md)

## Описание настроек

### 1. Инициализация React + TypeScript + Vite

**Зачем это нужно:**

- **Vite** - современный сборщик и dev-сервер, который обеспечивает:
  - Мгновенный запуск dev-сервера (HMR - Hot Module Replacement)
  - Быструю сборку благодаря использованию нативных ES-модулей
  - Оптимизацию для production

- **React** - библиотека для построения пользовательских интерфейсов:
  - Компонентный подход к разработке
  - Реактивность и автоматическое обновление UI при изменении данных
  - Большое сообщество и экосистема

- **TypeScript** - типизированный надмножество JavaScript:
  - Статическая проверка типов на этапе разработки
  - Автодополнение в IDE
  - Улучшенная читаемость кода и меньше ошибок в runtime
  - Упрощает рефакторинг больших проектов

**Файлы конфигурации:**
- `vite.config.ts` - конфигурация Vite с прокси для API
- `tsconfig.json` - настройки TypeScript компилятора
- `package.json` - зависимости и скрипты проекта

---

### 2. Настройка роутинга (React Router)

**Зачем это нужно:**

- **React Router** позволяет создавать Single Page Application (SPA):
  - Клиентский роутинг без перезагрузки страницы
  - Управление URL и навигацией в приложении
  - Защищенные маршруты (private routes) для авторизованных пользователей
  - Глубокие ссылки (deep linking) - возможность делиться прямыми ссылками на страницы
  - История навигации (назад/вперед)

**Что настроено:**
- `BrowserRouter` в `main.tsx` - обертка приложения для роутинга
- Базовые маршруты в `App.tsx`
- Примеры страниц: `HomePage`, `NotFoundPage`

**Использование:**
```tsx
import { Link, useNavigate, useParams } from 'react-router-dom'

// Навигация
<Link to="/users">Users</Link>

// Программная навигация
const navigate = useNavigate()
navigate('/users')
```

---

### 3. Настройка HTTP клиента (Axios)

**Зачем это нужно:**

- **Axios** - HTTP клиент для взаимодействия с backend API:
  - Централизованная конфигурация (base URL, таймауты, заголовки)
  - Интерсепторы для автоматической обработки запросов/ответов
  - Автоматическая сериализация/десериализация JSON
  - Обработка ошибок в одном месте
  - Поддержка отмены запросов (cancellation)

**Что настроено:**
- `src/services/api.ts` - экземпляр axios с базовой конфигурацией
- Интерсепторы для:
  - Добавления токенов авторизации
  - Логирования запросов/ответов в development
  - Централизованной обработки ошибок (401, 403, 404, 500)
- `src/services/apiEndpoints.ts` - типизированные API endpoints
- `src/hooks/useApi.ts` - кастомный хук для удобной работы с API

**Преимущества:**
- Единая точка конфигурации - изменить базовый URL можно в одном месте
- Автоматическая авторизация - токен добавляется ко всем запросам
- Логирование - легко отслеживать запросы в development
- Обработка ошибок - централизованная логика для всех HTTP ошибок

---

### 4. Настройка state management (Zustand)

**Зачем это нужно:**

- **Zustand** - легковесная библиотека для управления глобальным состоянием:
  - Простота использования - меньше boilerplate кода чем Redux
  - Производительность - минимальные ре-рендеры только нужных компонентов
  - Гибкость - можно использовать где угодно (не только в React компонентах)
  - Интеграция с DevTools - поддержка Redux DevTools
  - Персистентность - возможность сохранять состояние в localStorage

**Зачем нужен state management:**
- Глобальное состояние - данные доступны во всех компонентах
- Авторизация - состояние пользователя и токены
- UI состояние - темы, модальные окна, загрузки
- Кэширование - избегание повторных запросов к API
- Предсказуемость - централизованное управление данными

**Что настроено:**
- `src/store/useAppStore.ts` - основной store с:
  - Состоянием авторизации и пользователя
  - UI состоянием (тема, загрузка)
  - Действиями для обновления состояния
  - Поддержкой DevTools и персистентности

**Использование:**
```tsx
import { useAppStore } from './store'

function Component() {
  const { theme, setTheme, user } = useAppStore()
  
  return (
    <div>
      <p>Theme: {theme}</p>
      <button onClick={() => setTheme('dark')}>Set Dark</button>
    </div>
  )
}
```

---

## Установка и запуск

### Установка зависимостей

```bash
cd frontend
npm install
```

### Запуск dev-сервера

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:3000`

### Сборка для production

```bash
npm run build
```

Собранные файлы будут в папке `dist/`

### Предпросмотр production сборки

```bash
npm run preview
```

---

## Структура проекта

```
frontend/
├── src/
│   ├── components/      # Переиспользуемые React компоненты
│   ├── pages/           # Страницы приложения
│   ├── services/        # API клиент и endpoints
│   ├── store/           # Zustand stores
│   ├── hooks/           # Кастомные React хуки
│   ├── types/           # TypeScript типы
│   ├── utils/           # Утилиты
│   ├── App.tsx          # Главный компонент с роутингом
│   └── main.tsx         # Точка входа
├── public/              # Статические файлы
├── index.html           # HTML шаблон
├── vite.config.ts       # Конфигурация Vite
├── tsconfig.json        # Конфигурация TypeScript
└── package.json         # Зависимости и скрипты
```

---

## Дополнительная информация

### Прокси для API

В `vite.config.ts` настроен прокси для API запросов. Все запросы к `/api/*` будут перенаправляться на `http://localhost:8080/api/*`, что позволяет работать с backend без проблем с CORS.

### TypeScript строгий режим

Включен strict mode в TypeScript для максимальной безопасности типов.

### ESLint

Настроен ESLint для поддержания качества кода и единого стиля.

